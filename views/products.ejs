<%- include('./partials/header') %>

<div class="min-h-screen px-20 py-[80px]">
  <h2 class="text-3xl font-bold text-gray-800 mb-10 border-b pb-4">Your Products</h2>

  <% if (owner.products.length === 0) { %>
    <div class="text-center text-gray-500 text-xl py-20">No products added yet.</div>
  <% } else { %>
    <% owner.products.forEach((product) => { %>
      <div class="w-full flex flex-col md:flex-row items-start mb-12 gap-10 shadow-md border border-gray-200 rounded-md overflow-hidden transition hover:shadow-lg">
        <!-- Product Card -->
        <div class="md:w-[30%] w-full">
          <div class="w-full h-52 flex items-center justify-center bg-[<%= product.bgcolor %>]">
            <img class="w-5/6 h-5/6 object-contain" src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="Product Image">
          </div>
          <div class="w-full flex justify-between px-5 py-4 bg-[<%= product.panelcolor %>] text-[<%= product.textcolor %>]">
            <h3 class="text-xl font-semibold"><%= product.name %></h3>
            <div class="flex items-center gap-2">
              <form method="GET" action="/owner/products/edit/<%= product._id %>">
                <button type="submit" class="w-8 h-8 flex items-center justify-center rounded-full bg-white hover:bg-gray-100 transition" title="Edit">
                  <i class="ri-edit-line text-lg text-gray-700"></i>
                </button>
              </form>
              <form method="POST" action="/owner/products/delete/<%= product._id %>">
                <button type="submit" class="w-8 h-8 flex items-center justify-center rounded-full bg-white hover:bg-red-100 transition" title="Delete">
                  <i class="ri-delete-bin-line text-lg text-red-600"></i>
                </button>
              </form>
            </div>
          </div>
          <div class="flex items-center justify-between px-5 py-3 bg-[<%= product.textcolor %>] text-[<%= product.panelcolor %>]">
            <h4 class="text-md font-medium">Price</h4>
            <h2 class="text-md font-semibold">₹ <%= product.price %></h2>
          </div>
        </div>

        <!-- Details -->
        <div class="md:w-[70%] w-full px-6 py-4">
          <h3 class="text-xl font-semibold text-gray-800 mb-4">Product Details</h3>
          <div class="space-y-3 text-gray-700">
            <div class="flex">
              <h4 class="w-1/3 font-medium">MRP</h4>
              <h4>₹ <%= product.price %></h4>
            </div>
            <div class="flex">
              <h4 class="w-1/3 font-medium">Discount</h4>
              <h4><%= product.discount %>%</h4>
            </div>
            <div class="flex">
              <h4 class="w-1/3 font-medium">Platform Fee</h4>
              <h4>₹ 20</h4>
            </div>
            <div class="flex">
              <h4 class="w-1/3 font-medium">Net Selling Price</h4>
              <h4 class="font-semibold text-green-700">
                ₹ <%= (product.price - (product.price * product.discount / 100) + 20).toFixed(2) %>
              </h4>
            </div>
          </div>
        </div>
      </div>
    <% }) %>
  <% } %>
</div>
